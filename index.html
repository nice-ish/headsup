<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Heads Up (Tilt)</title>

<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0b0b0f;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    text-align: center;
  }
  .card {
    width: 90%;
    max-width: 420px;
    background: #141420;
    border-radius: 20px;
    padding: 24px;
    box-shadow: 0 20px 50px rgba(0,0,0,.4);
  }
  h1 {
    font-size: 18px;
    opacity: .85;
    margin-bottom: 12px;
  }
  .word {
    font-size: 42px;
    font-weight: 700;
    padding: 30px 10px;
    background: #10101a;
    border-radius: 16px;
    margin: 20px 0;
  }
  .hud {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    opacity: .9;
  }
  .status {
    margin-top: 14px;
    font-size: 14px;
    opacity: .75;
  }
  button {
    margin-top: 16px;
    width: 100%;
    padding: 14px;
    border-radius: 14px;
    border: none;
    background: #4c4cff;
    color: #fff;
    font-size: 16px;
    font-weight: 600;
  }
</style>
</head>

<body>
<div class="card">
  <h1>Heads Up — Tilt to Play</h1>

  <div class="hud">
    <div>✅ <span id="correct">0</span></div>
    <div>⏭ <span id="pass">0</span></div>
    <div>⏱ <span id="time">60</span>s</div>
  </div>

  <div id="word" class="word">Tap to start</div>

  <button id="start">Start / Enable Tilt</button>

  <div id="status" class="status">
    Hold upright → read<br>
    Tilt forward = correct<br>
    Tilt back = pass
  </div>
</div>

<script>
/* -------- CONFIG -------- */
const WORDS = [
  "Toy Story","Frozen","Titanic","Shrek","The Matrix",
  "Harry Potter","Finding Nemo","Jurassic Park",
  "Beyoncé","Taylor Swift","David Beckham",
  "Pizza","Toothbrush","Backpack","Sunglasses",
  "Greggs","Tube map","Fish and chips"
];
const ROUND_SECONDS = 60;
const TILT_THRESHOLD = 25; // degrees
const COOLDOWN_MS = 1000;
/* ------------------------ */

let words = [...WORDS];
let index = 0;
let correct = 0;
let pass = 0;
let timeLeft = ROUND_SECONDS;
let running = false;
let cooldown = false;
let timer = null;

const wordEl = document.getElementById("word");
const correctEl = document.getElementById("correct");
const passEl = document.getElementById("pass");
const timeEl = document.getElementById("time");
const statusEl = document.getElementById("status");
const startBtn = document.getElementById("start");

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function nextWord() {
  if (index >= words.length) {
    shuffle(words);
    index = 0;
  }
  wordEl.textContent = words[index++];
}

function startGame() {
  shuffle(words);
  index = 0;
  correct = 0;
  pass = 0;
  timeLeft = ROUND_SECONDS;
  running = true;

  correctEl.textContent = 0;
  passEl.textContent = 0;
  timeEl.textContent = timeLeft;

  nextWord();

  clearInterval(timer);
  timer = setInterval(() => {
    timeLeft--;
    timeEl.textContent = timeLeft;
    if (timeLeft <= 0) endGame();
  }, 1000);
}

function endGame() {
  running = false;
  clearInterval(timer);
  wordEl.textContent = "Round over ✅";
  statusEl.textContent = `Correct: ${correct} • Pass: ${pass}`;
}

function markCorrect() {
  if (!running || cooldown) return;
  correct++;
  correctEl.textContent = correct;
  statusEl.textContent = "Correct ✅";
  lock();
  nextWord();
}

function markPass() {
  if (!running || cooldown) return;
  pass++;
  passEl.textContent = pass;
  statusEl.textContent = "Pass ⏭";
  lock();
  nextWord();
}

function lock() {
  cooldown = true;
  setTimeout(() => cooldown = false, COOLDOWN_MS);
}

/* ---- Tilt handling ---- */
function handleOrientation(e) {
  if (!running || cooldown) return;
  const beta = e.beta; // front/back tilt

  if (beta > TILT_THRESHOLD) {
    markCorrect();
  } else if (beta < -TILT_THRESHOLD) {
    markPass();
  }
}

async function enableTilt() {
  if (
    typeof DeviceOrientationEvent !== "undefined" &&
    typeof DeviceOrientationEvent.requestPermission === "function"
  ) {
    const res = await DeviceOrientationEvent.requestPermission();
    if (res !== "granted") {
      alert("Motion permission denied");
      return;
    }
  }
  window.addEventListener("deviceorientation", handleOrientation);
  startGame();
}

startBtn.addEventListener("click", enableTilt);
</script>
</body>
</html>
